N - количество сообщений в памяти
M - количество сообщений в БД
X - сообщений на удаление
Y - сообщения на добавление

Способ 1:
	Получить дерево сообщений. 
	Найти ключи для удаления из базы/вставки в базу. 
	Удалить убранные ключи. 
	Внести новые: получить сообщение, добавить в дерево. 
	
(log(M)+M)+(2*N*M)+((sum(0,x,i,log(i))))+(sum(0,y,i,log(M-X+i)))

Способ 2:
	Получить сообщения.
	Удалить дерево. 
	Пройтись по списку MID и добавить в дерево новый элемент

(M)+(M)+(N*M)+sum(0,N,i,log(i))

Способ 3:
	Пройтись по новому списку MID и получить Message. 
	Удалить дерево.
	Внести новые
(N)+(M)+sum(0,N,i,log(i))